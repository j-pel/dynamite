<!DOCTYPE html>
<html>
  <head>
    <title>Dynamite Console</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <style type='text/css'>
    </style>
  </head>
  <body>
    <div id=header>
      <h1 id="main-title">Dynamite console</h1>
      <h3 id="slogan">A dynamite powered Cowboy</h3>
    </div>
    <div id='content'>
      <h1>Dynamite Console</h1>     
      <p>Dynamite is running. This console is for handling all the server options and features.</p>
      <h2>Sites</h2>     
      <% sites = ConsoleHandler.get_sites %>
      <% [site|_] = sites %>
      <% {_, info} = site %>
      <a id='conn'><span id='conn_msg'>Conectar</span>&nbsp;<span id='server_time' class='time'></span></a>
      <input class=text-box id='message_string' placeholder='Comando'></input>
      <a class=text-box href='#Mensaje'><span id='server_reply' class='reply'>&nbsp;</span></a>
      <h3>Pruebas din√°micas</h3>
      <% message = WebsocketHandler.ws_list|>Enum.map(fn(pid)->:erlang.pid_to_list(pid) end)|>:erlang.list_to_binary %>
      <p>Nodos conectados => (<span id=nodes_list><%= message %></span>)</p>
    </div>
    <textarea><%= info[:port] %></textarea>
    <script src="/static/js/websockets.js"></script>
    <script>
      websockets.init();
    </script>
  </body>
</html>

